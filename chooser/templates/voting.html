{% extends 'base.html' %}
{% load static %}

{% block title %}Chooser{% endblock %}

{% block extraheader %}
{% endblock %}

{% block content %}
<div class="voting-content">
    <h3>{{voting.title}}</h3>
    <h4>Описание:</h4>
    <p style="word-wrap: break-word; max-width: 80%;">{{voting.description}}</p>
    {% if voting.user.id != request.user.id %}
    <p>Создал: {{ voting.user.username }}</p>
    {% endif %}
    {% if percent == -1 %}
        <p>Никто еще не проголосовал</p>
    {% else %}
        <p>{{votesFor}} | {{votesAgainst}}</p>
        <p>За проголосовало: {{percent}}%</p>
    {% endif %}
    {% if request.user.is_authenticated %}
    {% if voting.user.id == request.user.id %}
    <p>Вы создали это голосование</p>
    {% else %}
        {% if isVoted %}
        <p>Вы уже проголосовали</p>
        {% else %}
            <form action="getVote" method="get">
                <span class="voting-button">
                    <button type="submit" class="btn btn-success" value="{{voting.id}}" name="btnFor">За</button>
                </span>
                <span class="voting-button">
                    <button type="submit" class="btn btn-danger" value="{{voting.id}}" name="btnAgainst">Против</button>
                </span>
            </form>
        {% endif %}
    {% endif %}
    {% else %}
        <p>Авторизируйтесь, чтобы проголосовать.</p>
    {% endif %}
    <hr style="visibility: hidden;">
    {% if voting.user.id != request.user.id %}
        {% if isComplaintCreated %}
            <p>Ваша жалоба на рассмотрении</p>
        {% else %}
            <form action="createComplaint" method="get">
                <span class="voting-button"></span>
                    <button type="submit" class="btn btn-warning" value="{{voting.id}}" name="btnCreate">Подать жалобу</button>
                </span>
            </form>
        {% endif %}
    {% endif %}
</div>
{% endblock %}